<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Here we provide a detailed analysis using more sophisticated statistics techniques.">

<title>MA [46]15 Final Project by Team 9 - Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">MA [46]15 Final Project by Team 9</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./big_picture.html" rel="" target="">
 <span class="menu-text">Landlords Envy Him â€“ The Budget Whisperer!</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./analysis.html" rel="" target="" aria-current="page">
 <span class="menu-text">Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./data.html" rel="" target="">
 <span class="menu-text">Data</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#research-question-and-motivation" id="toc-research-question-and-motivation" class="nav-link active" data-scroll-target="#research-question-and-motivation">Research Question and Motivation</a>
  <ul class="collapse">
  <li><a href="#motivation" id="toc-motivation" class="nav-link" data-scroll-target="#motivation">Motivation</a></li>
  <li><a href="#objectives" id="toc-objectives" class="nav-link" data-scroll-target="#objectives">Objectives</a></li>
  <li><a href="#key-questions" id="toc-key-questions" class="nav-link" data-scroll-target="#key-questions">Key Questions</a></li>
  </ul></li>
  <li><a href="#models-and-inferences-first-dataset" id="toc-models-and-inferences-first-dataset" class="nav-link" data-scroll-target="#models-and-inferences-first-dataset">Models and Inferences (First dataset)</a>
  <ul class="collapse">
  <li><a href="#outline" id="toc-outline" class="nav-link" data-scroll-target="#outline">Outline</a></li>
  <li><a href="#simple-linear-regression-model" id="toc-simple-linear-regression-model" class="nav-link" data-scroll-target="#simple-linear-regression-model">1. Simple Linear Regression Model</a>
  <ul class="collapse">
  <li><a href="#model-overview" id="toc-model-overview" class="nav-link" data-scroll-target="#model-overview">Model Overview:</a></li>
  <li><a href="#model-findings" id="toc-model-findings" class="nav-link" data-scroll-target="#model-findings">Model Findings:</a></li>
  <li><a href="#statistical-performance" id="toc-statistical-performance" class="nav-link" data-scroll-target="#statistical-performance">Statistical Performance:</a></li>
  <li><a href="#model-discussion" id="toc-model-discussion" class="nav-link" data-scroll-target="#model-discussion">Model Discussion:</a></li>
  </ul></li>
  <li><a href="#multiple-linear-regression-model" id="toc-multiple-linear-regression-model" class="nav-link" data-scroll-target="#multiple-linear-regression-model">2. Multiple Linear Regression Model</a>
  <ul class="collapse">
  <li><a href="#model-overview-1" id="toc-model-overview-1" class="nav-link" data-scroll-target="#model-overview-1">Model Overview:</a></li>
  <li><a href="#model-findings-1" id="toc-model-findings-1" class="nav-link" data-scroll-target="#model-findings-1">Model Findings:</a></li>
  <li><a href="#statistical-performance-1" id="toc-statistical-performance-1" class="nav-link" data-scroll-target="#statistical-performance-1">Statistical Performance:</a></li>
  <li><a href="#variable-selection-and-model-refinement" id="toc-variable-selection-and-model-refinement" class="nav-link" data-scroll-target="#variable-selection-and-model-refinement">Variable Selection and model refinement:</a></li>
  <li><a href="#model-discussion-1" id="toc-model-discussion-1" class="nav-link" data-scroll-target="#model-discussion-1">Model Discussion :</a></li>
  </ul></li>
  <li><a href="#log-log-regression-model" id="toc-log-log-regression-model" class="nav-link" data-scroll-target="#log-log-regression-model">3. Log-Log Regression Model</a>
  <ul class="collapse">
  <li><a href="#model-overview-2" id="toc-model-overview-2" class="nav-link" data-scroll-target="#model-overview-2">Model Overview:</a></li>
  <li><a href="#model-findings-2" id="toc-model-findings-2" class="nav-link" data-scroll-target="#model-findings-2">Model Findings:</a></li>
  <li><a href="#statistical-performance-2" id="toc-statistical-performance-2" class="nav-link" data-scroll-target="#statistical-performance-2">Statistical Performance:</a></li>
  <li><a href="#model-discussion-2" id="toc-model-discussion-2" class="nav-link" data-scroll-target="#model-discussion-2">Model Discussion:</a></li>
  </ul></li>
  <li><a href="#log-log-regression-model-by-race" id="toc-log-log-regression-model-by-race" class="nav-link" data-scroll-target="#log-log-regression-model-by-race">4. Log-Log Regression Model by Race</a>
  <ul class="collapse">
  <li><a href="#model-overview-3" id="toc-model-overview-3" class="nav-link" data-scroll-target="#model-overview-3">Model Overview</a></li>
  <li><a href="#model-findings-3" id="toc-model-findings-3" class="nav-link" data-scroll-target="#model-findings-3">Model Findings:</a></li>
  <li><a href="#statistical-performance-3" id="toc-statistical-performance-3" class="nav-link" data-scroll-target="#statistical-performance-3">Statistical Performance:</a></li>
  <li><a href="#model-discussion-3" id="toc-model-discussion-3" class="nav-link" data-scroll-target="#model-discussion-3">Model Discussion:</a></li>
  </ul></li>
  <li><a href="#enhanced-log-log-regression-model-with-interaction-terms" id="toc-enhanced-log-log-regression-model-with-interaction-terms" class="nav-link" data-scroll-target="#enhanced-log-log-regression-model-with-interaction-terms">5. Enhanced Log-Log Regression Model with Interaction Terms</a>
  <ul class="collapse">
  <li><a href="#model-overview-4" id="toc-model-overview-4" class="nav-link" data-scroll-target="#model-overview-4">Model Overview</a></li>
  <li><a href="#model-overview-and-model-refinement" id="toc-model-overview-and-model-refinement" class="nav-link" data-scroll-target="#model-overview-and-model-refinement">Model Overview and Model Refinement:</a></li>
  <li><a href="#statistical-performance-4" id="toc-statistical-performance-4" class="nav-link" data-scroll-target="#statistical-performance-4">Statistical Performance:</a></li>
  <li><a href="#model-discussion-4" id="toc-model-discussion-4" class="nav-link" data-scroll-target="#model-discussion-4">Model Discussion:</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#models-and-inferences-merged-dataset" id="toc-models-and-inferences-merged-dataset" class="nav-link" data-scroll-target="#models-and-inferences-merged-dataset">Models and Inferences (Merged dataset)</a>
  <ul class="collapse">
  <li><a href="#outline-1" id="toc-outline-1" class="nav-link" data-scroll-target="#outline-1">Outline</a></li>
  <li><a href="#log-log-regression-model-by-year" id="toc-log-log-regression-model-by-year" class="nav-link" data-scroll-target="#log-log-regression-model-by-year">1. Log-Log Regression Model by YEAR</a>
  <ul class="collapse">
  <li><a href="#model-overview-5" id="toc-model-overview-5" class="nav-link" data-scroll-target="#model-overview-5">Model Overview:</a></li>
  <li><a href="#model-findings-4" id="toc-model-findings-4" class="nav-link" data-scroll-target="#model-findings-4">Model Findings:</a></li>
  <li><a href="#statistical-performance-5" id="toc-statistical-performance-5" class="nav-link" data-scroll-target="#statistical-performance-5">Statistical Performance:</a></li>
  </ul></li>
  <li><a href="#longitudinal-log-log-regression-model-by-race" id="toc-longitudinal-log-log-regression-model-by-race" class="nav-link" data-scroll-target="#longitudinal-log-log-regression-model-by-race">2. Longitudinal Log-Log Regression Model by Race</a>
  <ul class="collapse">
  <li><a href="#model-overview-6" id="toc-model-overview-6" class="nav-link" data-scroll-target="#model-overview-6">Model Overview:</a></li>
  <li><a href="#model-findings-5" id="toc-model-findings-5" class="nav-link" data-scroll-target="#model-findings-5">Model Findings:</a></li>
  <li><a href="#statistical-performance-6" id="toc-statistical-performance-6" class="nav-link" data-scroll-target="#statistical-performance-6">Statistical Performance:</a></li>
  <li><a href="#discussion-of-the-topic" id="toc-discussion-of-the-topic" class="nav-link" data-scroll-target="#discussion-of-the-topic">Discussion of the topic:</a></li>
  </ul></li>
  <li><a href="#time-series-model" id="toc-time-series-model" class="nav-link" data-scroll-target="#time-series-model">3.Time series model</a>
  <ul class="collapse">
  <li><a href="#model-overview-7" id="toc-model-overview-7" class="nav-link" data-scroll-target="#model-overview-7">Model Overview:</a></li>
  <li><a href="#model-findings-6" id="toc-model-findings-6" class="nav-link" data-scroll-target="#model-findings-6">Model Findings:</a></li>
  </ul></li>
  <li><a href="#log-log-model" id="toc-log-log-model" class="nav-link" data-scroll-target="#log-log-model">log-log model</a>
  <ul class="collapse">
  <li><a href="#regression-coefficients-table" id="toc-regression-coefficients-table" class="nav-link" data-scroll-target="#regression-coefficients-table">Regression Coefficients Table:</a></li>
  <li><a href="#statistical-performance-7" id="toc-statistical-performance-7" class="nav-link" data-scroll-target="#statistical-performance-7">Statistical performance:</a></li>
  <li><a href="#model-discussion-5" id="toc-model-discussion-5" class="nav-link" data-scroll-target="#model-discussion-5">Model discussion</a></li>
  </ul></li>
  <li><a href="#residual-plot" id="toc-residual-plot" class="nav-link" data-scroll-target="#residual-plot">Residual plot</a></li>
  <li><a href="#qq-plot" id="toc-qq-plot" class="nav-link" data-scroll-target="#qq-plot">QQ plot</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Analysis</h1>
</div>

<div>
  <div class="description">
    Here we provide a detailed analysis using more sophisticated statistics techniques.
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="research-question-and-motivation" class="level1">
<h1>Research Question and Motivation</h1>
<section id="motivation" class="level2">
<h2 class="anchored" data-anchor-id="motivation">Motivation</h2>
<p>The primary focus of this research is to investigate the relationship between individual income levels and rental expenditures. This analysis is motivated by the need to understand the financial burdens of rent relative to income and how this impacts different demographic groups over time.</p>
</section>
<section id="objectives" class="level2">
<h2 class="anchored" data-anchor-id="objectives">Objectives</h2>
<ul>
<li><strong>Relationship Exploration</strong>: We aim to determine how changes in income levels affect rental spending. This includes examining whether the relationship is strictly linear or if there are nonlinear dynamics that better capture the fluctuations in rental expenditures as income varies.</li>
<li><strong>Quantitative Analysis</strong>: Our goal is to quantify the relationship precisely. For example, we seek to estimate the increase in rental expenditure for every thousand-dollar increase in income or the percentage change of rent expenditure for every one percent increase in income.</li>
<li><strong>Demographic Variance</strong>: The study will also consider racial differences to identify how incomeâ€™s impact on rent varies among different racial groups.</li>
<li><strong>Temporal Analysis</strong>: Employing a time series regression model allows us to account for changes over time, providing a dynamic perspective on the income-rent relationship.</li>
</ul>
</section>
<section id="key-questions" class="level2">
<h2 class="anchored" data-anchor-id="key-questions">Key Questions</h2>
<ul>
<li>What is the quantitative impact of income changes on rental expenditures?</li>
<li>How does the relationship between income and rent vary across different racial groups?</li>
<li>Does the relationship between income and rent change over time?</li>
</ul>
</section>
</section>
<section id="models-and-inferences-first-dataset" class="level1">
<h1>Models and Inferences (First dataset)</h1>
<section id="outline" class="level2">
<h2 class="anchored" data-anchor-id="outline">Outline</h2>
<ol type="1">
<li>Simple Linear Regression Model (Detailed in Class Blog 4)</li>
<li>Multiple Linear Regression Model (Detailed in Class Blog 4)</li>
<li>Log-Log Regression Model</li>
<li>Log-Log Regression Model with interaction terms</li>
</ol>
</section>
<section id="simple-linear-regression-model" class="level2">
<h2 class="anchored" data-anchor-id="simple-linear-regression-model">1. Simple Linear Regression Model</h2>
<section id="model-overview" class="level3">
<h3 class="anchored" data-anchor-id="model-overview">Model Overview:</h3>
<p>This model investigates the relationship between income (the predictor) and rent (the response), offering preliminary insights into whether they share a positive or negative correlation and assessing if it is worth to have further detailed analysis.</p>
</section>
<section id="model-findings" class="level3">
<h3 class="anchored" data-anchor-id="model-findings">Model Findings:</h3>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">std.error</th>
<th style="text-align: right;">statistic</th>
<th style="text-align: right;">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">1329.7165501</td>
<td style="text-align: right;">15.8008996</td>
<td style="text-align: right;">84.15448</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">INCTOT</td>
<td style="text-align: right;">0.0057046</td>
<td style="text-align: right;">0.0002248</td>
<td style="text-align: right;">25.38011</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li>The model suggests that an increase of $1,000 in income is associated with an average increase of approximately 5.7 dollars in the rent variable.</li>
</ul>
</section>
<section id="statistical-performance" class="level3">
<h3 class="anchored" data-anchor-id="statistical-performance">Statistical Performance:</h3>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 9%">
<col style="width: 12%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 2%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">r.squared</th>
<th style="text-align: right;">adj.r.squared</th>
<th style="text-align: right;">sigma</th>
<th style="text-align: right;">statistic</th>
<th style="text-align: right;">p.value</th>
<th style="text-align: right;">df</th>
<th style="text-align: right;">logLik</th>
<th style="text-align: right;">AIC</th>
<th style="text-align: right;">BIC</th>
<th style="text-align: right;">deviance</th>
<th style="text-align: right;">df.residual</th>
<th style="text-align: right;">nobs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.1108854</td>
<td style="text-align: right;">0.1107132</td>
<td style="text-align: right;">884.7833</td>
<td style="text-align: right;">644.1498</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-42390.52</td>
<td style="text-align: right;">84787.04</td>
<td style="text-align: right;">84806.69</td>
<td style="text-align: right;">4043376235</td>
<td style="text-align: right;">5165</td>
<td style="text-align: right;">5167</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li><p>The modelâ€™s R-squared and adjusted R-squared values are modest but acceptable for simple linear regression, justifying further exploration.</p></li>
<li><p>A significant F-statistic and p_value confirm the modelâ€™s statistical relevance, despite a high sigma pointing to considerable unexplained variance.</p></li>
</ul>
</section>
<section id="model-discussion" class="level3">
<h3 class="anchored" data-anchor-id="model-discussion">Model Discussion:</h3>
<ul>
<li>The model offers an initial look at the income-rent relationship but is incomplete.</li>
<li>Future analysis should incorporate more factors for greater accuracy.</li>
</ul>
</section>
</section>
<section id="multiple-linear-regression-model" class="level2">
<h2 class="anchored" data-anchor-id="multiple-linear-regression-model">2. Multiple Linear Regression Model</h2>
<section id="model-overview-1" class="level3">
<h3 class="anchored" data-anchor-id="model-overview-1">Model Overview:</h3>
<ul>
<li>This model enhances the simple linear regression by incorporating additional confounding variables to refine our analysis.</li>
<li>This expanded model builds upon the initial simple linear regression framework.</li>
</ul>
</section>
<section id="model-findings-1" class="level3">
<h3 class="anchored" data-anchor-id="model-findings-1">Model Findings:</h3>
<p><a href="https://yatingzhu.shinyapps.io/app1/">Click here to view the summary table, which includes estimates, standard errors, statistics, and p-values for each coefficient.</a></p>
<ul>
<li>A $1,000 increase in total income (INCTOT) is associated with an average increase of 5.2 in gross rent (RENTGRS), assuming other variables are constant.</li>
</ul>
</section>
<section id="statistical-performance-1" class="level3">
<h3 class="anchored" data-anchor-id="statistical-performance-1">Statistical Performance:</h3>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 9%">
<col style="width: 12%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 2%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">r.squared</th>
<th style="text-align: right;">adj.r.squared</th>
<th style="text-align: right;">sigma</th>
<th style="text-align: right;">statistic</th>
<th style="text-align: right;">p.value</th>
<th style="text-align: right;">df</th>
<th style="text-align: right;">logLik</th>
<th style="text-align: right;">AIC</th>
<th style="text-align: right;">BIC</th>
<th style="text-align: right;">deviance</th>
<th style="text-align: right;">df.residual</th>
<th style="text-align: right;">nobs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.2317473</td>
<td style="text-align: right;">0.2284616</td>
<td style="text-align: right;">824.1282</td>
<td style="text-align: right;">70.53243</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">-42013.05</td>
<td style="text-align: right;">84074.11</td>
<td style="text-align: right;">84231.31</td>
<td style="text-align: right;">3493739342</td>
<td style="text-align: right;">5144</td>
<td style="text-align: right;">5167</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li>The R-squared value of 0.28 indicates that approximately 28% of the variance in the dependent variable (gross rent) is explained by the model, which is a considerable improvement compared to the simple linear regression.</li>
<li>The adjusted R-squared value of 0.2807292 closely mirrors the R-squared value, suggesting that the additional predictors are effectively contributing valuable information.</li>
<li>A F-statistic value of 98.57 and a p-value of 0 confirm the statistical significance of the model, suggesting that the regression results are highly unlikely to occur by chance.</li>
</ul>
</section>
<section id="variable-selection-and-model-refinement" class="level3">
<h3 class="anchored" data-anchor-id="variable-selection-and-model-refinement">Variable Selection and model refinement:</h3>
<ul>
<li>A correlation matrix was used to identify control variables and to detect potential multi-collinearity issues.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">INCTOT</th>
<th style="text-align: right;">ROOMS</th>
<th style="text-align: right;">NFAMS</th>
<th style="text-align: right;">AGE</th>
<th style="text-align: right;">FTOTINC</th>
<th style="text-align: right;">RENTGRS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">INCTOT</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: right;">-0.0149409</td>
<td style="text-align: right;">-0.0313099</td>
<td style="text-align: right;">-0.0077964</td>
<td style="text-align: right;">0.7282638</td>
<td style="text-align: right;">0.3329946</td>
</tr>
<tr class="even">
<td style="text-align: left;">ROOMS</td>
<td style="text-align: right;">-0.0149409</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: right;">0.1631221</td>
<td style="text-align: right;">-0.0439707</td>
<td style="text-align: right;">0.1083906</td>
<td style="text-align: right;">0.1406264</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NFAMS</td>
<td style="text-align: right;">-0.0313099</td>
<td style="text-align: right;">0.1631221</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: right;">-0.1405046</td>
<td style="text-align: right;">-0.0924716</td>
<td style="text-align: right;">0.0881204</td>
</tr>
<tr class="even">
<td style="text-align: left;">AGE</td>
<td style="text-align: right;">-0.0077964</td>
<td style="text-align: right;">-0.0439707</td>
<td style="text-align: right;">-0.1405046</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: right;">-0.0768613</td>
<td style="text-align: right;">-0.0870537</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FTOTINC</td>
<td style="text-align: right;">0.7282638</td>
<td style="text-align: right;">0.1083906</td>
<td style="text-align: right;">-0.0924716</td>
<td style="text-align: right;">-0.0768613</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: right;">0.4448424</td>
</tr>
<tr class="even">
<td style="text-align: left;">RENTGRS</td>
<td style="text-align: right;">0.3329946</td>
<td style="text-align: right;">0.1406264</td>
<td style="text-align: right;">0.0881204</td>
<td style="text-align: right;">-0.0870537</td>
<td style="text-align: right;">0.4448424</td>
<td style="text-align: right;">1.0000000</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li>A review of multicollinearity prompted the removal of <code>FTOTINC</code> to prevent model overfitting.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">GVIF</th>
<th style="text-align: right;">Df</th>
<th style="text-align: right;">GVIF^(1/(2*Df))</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">INCTOT</td>
<td style="text-align: right;">2.317240</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.522248</td>
</tr>
<tr class="even">
<td style="text-align: left;">KITCHEN</td>
<td style="text-align: right;">1.023481</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.011673</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ROOMS</td>
<td style="text-align: right;">1.108739</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.052967</td>
</tr>
<tr class="even">
<td style="text-align: left;">NFAMS</td>
<td style="text-align: right;">1.111046</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.054062</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AGE</td>
<td style="text-align: right;">2.074406</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.440280</td>
</tr>
<tr class="even">
<td style="text-align: left;">MARST</td>
<td style="text-align: right;">1.856902</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">1.063846</td>
</tr>
<tr class="odd">
<td style="text-align: left;">RACE</td>
<td style="text-align: right;">1.198063</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">1.011358</td>
</tr>
<tr class="even">
<td style="text-align: left;">EMPSTAT</td>
<td style="text-align: right;">1.576945</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.120609</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FTOTINC</td>
<td style="text-align: right;">2.385884</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.544631</td>
</tr>
<tr class="even">
<td style="text-align: left;">REGION_CLASSIFIED</td>
<td style="text-align: right;">1.130442</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1.020645</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li>The selection and validation of control variables were systematically conducted.</li>
<li>After fitting the multiple linear regression (MLR) model, <code>Kitchen</code> was removed due to its statistical insignificance, indicated by a high p-value.</li>
<li><code>Employment Status</code>, although not as critical, also showed a non-significant p-value and is suspected to interact with variables like <code>Income</code> or <code>FTOTINC</code>. This interaction will be explored further.</li>
</ul>
</section>
<section id="model-discussion-1" class="level3">
<h3 class="anchored" data-anchor-id="model-discussion-1">Model Discussion :</h3>
<div class="cell">
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>The pattern in this plot suggests potential non-linear relationships and heteroscedasticity as the systematic pattern seen here where residuals create a fan-shaped spread.</li>
<li>There are some points that stand out from the cloud of points, especially on the bottom left and the top right of the plot. These could be potential outliers or leverage points.</li>
<li>Given the apparent increase in variability of residuals with the size of the fitted values and the non-linear pattern, applying a log transformation to the variable might help.</li>
</ul>
</section>
</section>
<section id="log-log-regression-model" class="level2">
<h2 class="anchored" data-anchor-id="log-log-regression-model">3. Log-Log Regression Model</h2>
<section id="model-overview-2" class="level3">
<h3 class="anchored" data-anchor-id="model-overview-2">Model Overview:</h3>
<ul>
<li>Predictor and response variables underwent log transformation to correct for right skewness, as elaborated on the data page and the discussion in last section.</li>
<li>A reanalysis was conducted post data cleansing to assess the impact of log-transformed variables.</li>
</ul>
</section>
<section id="model-findings-2" class="level3">
<h3 class="anchored" data-anchor-id="model-findings-2">Model Findings:</h3>
<p><a href="https://yatingzhu.shinyapps.io/app2/">Click here to view the summary table, which includes estimates, standard errors, statistics, and p-values for each coefficient.</a></p>
<ul>
<li>The model suggests that a 10% increase in income is predicted to raise rent by an average of 13.34%, with all other variables held constant, indicating incomeâ€™s elasticity effect on rent.</li>
</ul>
</section>
<section id="statistical-performance-2" class="level3">
<h3 class="anchored" data-anchor-id="statistical-performance-2">Statistical Performance:</h3>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 9%">
<col style="width: 12%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 2%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 11%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">r.squared</th>
<th style="text-align: right;">adj.r.squared</th>
<th style="text-align: right;">sigma</th>
<th style="text-align: right;">statistic</th>
<th style="text-align: right;">p.value</th>
<th style="text-align: right;">df</th>
<th style="text-align: right;">logLik</th>
<th style="text-align: right;">AIC</th>
<th style="text-align: right;">BIC</th>
<th style="text-align: right;">deviance</th>
<th style="text-align: right;">df.residual</th>
<th style="text-align: right;">nobs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.2267776</td>
<td style="text-align: right;">0.2234707</td>
<td style="text-align: right;">0.5072099</td>
<td style="text-align: right;">68.5763</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">-3812.614</td>
<td style="text-align: right;">7673.227</td>
<td style="text-align: right;">7830.428</td>
<td style="text-align: right;">1323.355</td>
<td style="text-align: right;">5144</td>
<td style="text-align: right;">5167</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li>An adjusted R-squared value of 0.223, while modest, is considered adequate within the complex realms of social science and economics.</li>
<li>A very low p-value signifies the statistical significance of the modelâ€™s predictors.</li>
<li>The sigma valueâ€™s reduction points to a more precise model, albeit comparisons with non-logarithmic models are not straightforward due to scale differences.</li>
</ul>
</section>
<section id="model-discussion-2" class="level3">
<h3 class="anchored" data-anchor-id="model-discussion-2">Model Discussion:</h3>
<ol type="1">
<li>Linearity and Homoscedasticity:</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>The absence of a systematic pattern in the residuals indicates a proper capture of the relationship between the predictors and response variable in the log-transformed model.</li>
<li>The spread of residuals is mostly consistent, though some widening at the extremes suggests minor heteroscedasticity. This is often a minor issue in economic data, reflecting the variability in higher income or rent brackets, and doesnâ€™t significantly affect the modelâ€™s overall validity.</li>
<li>Residuals predominantly centering around the zero line signify no model bias, reinforcing the modelâ€™s accuracy.</li>
<li>A small number of potential outliers deviate from the main cluster, which is typical in large economic datasets and generally does not markedly impact the robust central trend captured by the model.</li>
</ul>
<ol start="2" type="1">
<li>Normality of Residuals:</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>The bulk of residuals align with the normality line on the Q-Q plot, with slight deviations at both ends.</li>
<li>These deviations, often seen in economic data due to outliers, do not substantially affect the modelâ€™s predictive capability.</li>
</ul>
<ol start="3" type="1">
<li>IID Errors:</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Durbin-Watson Test Results</caption>
<thead>
<tr class="header">
<th style="text-align: right;">Statistic</th>
<th style="text-align: right;">p_Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1.977496</td>
<td style="text-align: right;">0.2092356</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li>For Durbin-Watson Statistic, the result statistic value close to 2 indicates no autocorrelation, implying that the errors are independent. And for a random scatter of residuals, without visible trends or cycles, supports the assumption of IID errors.</li>
</ul>
<ol start="4" type="1">
<li>Multicollinearity:</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">GVIF</th>
<th style="text-align: right;">Df</th>
<th style="text-align: right;">GVIF^(1/(2*Df))</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">log_INCTOT</td>
<td style="text-align: right;">1.298351</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.139452</td>
</tr>
<tr class="even">
<td style="text-align: left;">ROOMS</td>
<td style="text-align: right;">1.069938</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.034378</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NFAMS</td>
<td style="text-align: right;">1.088234</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.043185</td>
</tr>
<tr class="even">
<td style="text-align: left;">AGE</td>
<td style="text-align: right;">2.109694</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.452479</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MARST</td>
<td style="text-align: right;">1.790805</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">1.059997</td>
</tr>
<tr class="even">
<td style="text-align: left;">RACE</td>
<td style="text-align: right;">1.193223</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">1.011102</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EMPSTAT</td>
<td style="text-align: right;">1.844666</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.165412</td>
</tr>
<tr class="even">
<td style="text-align: left;">REGION_CLASSIFIED</td>
<td style="text-align: right;">1.119686</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1.019020</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li>The adjusted GVIF values, being all near or below the threshold of 1.5 after taking the root, demonstrate that the multicollinearity is likely not distorting the estimates in the regression model significantly. This implies that each predictor variable is providing unique information that is not overly redundant with other variables in the model.</li>
</ul>
<p><strong>Upon reviewing these diagnostic measures, the model is deemed well-fitted, and the derived conclusions are robust and reliable.</strong></p>
</section>
</section>
<section id="log-log-regression-model-by-race" class="level2">
<h2 class="anchored" data-anchor-id="log-log-regression-model-by-race">4. Log-Log Regression Model by Race</h2>
<section id="model-overview-3" class="level3">
<h3 class="anchored" data-anchor-id="model-overview-3">Model Overview</h3>
<ul>
<li>This analysis applies a stratified Log-Log regression approach, segregating data by race as detailed in Class Blog 6. It builds upon the strong foundational understanding from Section 3.</li>
</ul>
</section>
<section id="model-findings-3" class="level3">
<h3 class="anchored" data-anchor-id="model-findings-3">Model Findings:</h3>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">RACE</th>
<th style="text-align: right;">log_INCTOT_Coefficient</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">American Indian or Alaska Native</td>
<td style="text-align: right;">0.0937685</td>
</tr>
<tr class="even">
<td style="text-align: left;">Black/African American</td>
<td style="text-align: right;">0.0621126</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Chinese</td>
<td style="text-align: right;">0.1915177</td>
</tr>
<tr class="even">
<td style="text-align: left;">Other Asian or Pacific Islander</td>
<td style="text-align: right;">0.1050231</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Other race, nec</td>
<td style="text-align: right;">0.0376731</td>
</tr>
<tr class="even">
<td style="text-align: left;">Three or more major races</td>
<td style="text-align: right;">0.1048730</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Two major races</td>
<td style="text-align: right;">0.0882288</td>
</tr>
<tr class="even">
<td style="text-align: left;">White</td>
<td style="text-align: right;">0.1676538</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li><p>The coefficient for log_INCTOT shows notable variation across racial categories, which indicates the impact of income on rent varies by race.</p></li>
<li><p>The Chinese group demonstrates the highest log_INCTOT coefficient, indicating a particularly strong positive association between income and rent within this demographic.</p></li>
<li><p>American Indian or Alaska Native, Other Asian or Pacific Islander, Other race, nec, Three or more major races, and White categories show a range of coefficients, suggesting varied levels of positive association.</p></li>
<li><p>Black/African American and Two major races groups present with lower coefficients, hinting at a relatively weaker positive relationship.</p></li>
</ul>
</section>
<section id="statistical-performance-3" class="level3">
<h3 class="anchored" data-anchor-id="statistical-performance-3">Statistical Performance:</h3>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">RACE</th>
<th style="text-align: left;">term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">American Indian or Alaska Native</td>
<td style="text-align: left;">log_INCTOT</td>
<td style="text-align: right;">0.0937685</td>
<td style="text-align: right;">0.3138472</td>
</tr>
<tr class="even">
<td style="text-align: left;">Black/African American</td>
<td style="text-align: left;">log_INCTOT</td>
<td style="text-align: right;">0.0621126</td>
<td style="text-align: right;">0.0012082</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Chinese</td>
<td style="text-align: left;">log_INCTOT</td>
<td style="text-align: right;">0.1915177</td>
<td style="text-align: right;">0.0428004</td>
</tr>
<tr class="even">
<td style="text-align: left;">Other Asian or Pacific Islander</td>
<td style="text-align: left;">log_INCTOT</td>
<td style="text-align: right;">0.1050231</td>
<td style="text-align: right;">0.0001647</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Other race, nec</td>
<td style="text-align: left;">log_INCTOT</td>
<td style="text-align: right;">0.0376731</td>
<td style="text-align: right;">0.1041104</td>
</tr>
<tr class="even">
<td style="text-align: left;">Three or more major races</td>
<td style="text-align: left;">log_INCTOT</td>
<td style="text-align: right;">0.1048730</td>
<td style="text-align: right;">0.1615109</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Two major races</td>
<td style="text-align: left;">log_INCTOT</td>
<td style="text-align: right;">0.0882288</td>
<td style="text-align: right;">0.0000441</td>
</tr>
<tr class="even">
<td style="text-align: left;">White</td>
<td style="text-align: left;">log_INCTOT</td>
<td style="text-align: right;">0.1676538</td>
<td style="text-align: right;">0.0000000</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li><p>For most racial groups, the p-values indicate statistical significance (p &lt; 0.05), especially pronounced for <code>Black/African American</code>, <code>Chinese</code>, <code>Other Asian or Pacific Islander</code>, and <code>White categories</code>, implying a strong relationship between income and rent.</p></li>
<li><p>The higher p-value for <code>American Indian or Alaska Native</code> suggests that the relationship between income and rent is <strong>not statistically significant</strong> for this group, based on the traditional alpha threshold.</p></li>
</ul>
</section>
<section id="model-discussion-3" class="level3">
<h3 class="anchored" data-anchor-id="model-discussion-3">Model Discussion:</h3>
<ul>
<li><p>The evident variability in log_INCTOT coefficients across races suggests that the relationship between income and rent is influenced by racial factors, pointing towards the complexity inherent in socio-economic dynamics.</p></li>
<li><p>Non-significance in certain racial categories may reflect data limitations or the presence of other variables not captured in the model, indicating areas where further research or data collection could be beneficial.</p></li>
<li><p>The modelâ€™s overall robustness and the significance of its findings provide valuable insights, yet also suggest that an exploration of additional socio-economic factors and historical trends could contribute to a more nuanced understanding.</p></li>
</ul>
</section>
</section>
<section id="enhanced-log-log-regression-model-with-interaction-terms" class="level2">
<h2 class="anchored" data-anchor-id="enhanced-log-log-regression-model-with-interaction-terms">5. Enhanced Log-Log Regression Model with Interaction Terms</h2>
<section id="model-overview-4" class="level3">
<h3 class="anchored" data-anchor-id="model-overview-4">Model Overview</h3>
<ul>
<li>This model is built upon the solid foundation established in Section 3. This section explores nonlinearity further and addresses the potential skewness identified in the conclusions of Model 3.</li>
</ul>
</section>
<section id="model-overview-and-model-refinement" class="level3">
<h3 class="anchored" data-anchor-id="model-overview-and-model-refinement">Model Overview and Model Refinement:</h3>
<ul>
<li><p>The interaction term <code>EMPSTAT * FTOTINC</code> has been introduced to investigate the suspected interaction effect between employment status and total family income.</p></li>
<li><p>Post inclusion, the p-value for <code>EMPSTATUnemployed:FTOTINC</code> is slightly above 0.05, suggesting it has borderline statistical significance. Therefore, adding interaction term needs to have further consideration.</p></li>
</ul>
</section>
<section id="statistical-performance-4" class="level3">
<h3 class="anchored" data-anchor-id="statistical-performance-4">Statistical Performance:</h3>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 9%">
<col style="width: 12%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 2%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 11%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">r.squared</th>
<th style="text-align: right;">adj.r.squared</th>
<th style="text-align: right;">sigma</th>
<th style="text-align: right;">statistic</th>
<th style="text-align: right;">p.value</th>
<th style="text-align: right;">df</th>
<th style="text-align: right;">logLik</th>
<th style="text-align: right;">AIC</th>
<th style="text-align: right;">BIC</th>
<th style="text-align: right;">deviance</th>
<th style="text-align: right;">df.residual</th>
<th style="text-align: right;">nobs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.2727009</td>
<td style="text-align: right;">0.2691641</td>
<td style="text-align: right;">0.4920608</td>
<td style="text-align: right;">77.10474</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">-3654.429</td>
<td style="text-align: right;">7362.857</td>
<td style="text-align: right;">7539.709</td>
<td style="text-align: right;">1244.758</td>
<td style="text-align: right;">5141</td>
<td style="text-align: right;">5167</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li><p>All predictors show statistical significance, with the exception of certain categories within marital status and employment status, indicating robustness in the variable selection.</p></li>
<li><p>The integration of the interaction term retains the significance of other variables, with no detrimental impact on the modelâ€™s variables as reflected in their p-values.</p></li>
</ul>
</section>
<section id="model-discussion-4" class="level3">
<h3 class="anchored" data-anchor-id="model-discussion-4">Model Discussion:</h3>
<ul>
<li>The residual plot indicates that the model without interaction terms performs better than the log-log regression with interaction terms. This residual plot does not show the performance as well as the section 3.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Therefore, although this modelâ€™s conclusions offer an extension to our understanding of the economic factors influencing rent prices in section 3, we still take the log_log model for further analysis.</strong></p>
</section>
</section>
</section>
<section id="models-and-inferences-merged-dataset" class="level1">
<h1>Models and Inferences (Merged dataset)</h1>
<section id="outline-1" class="level2">
<h2 class="anchored" data-anchor-id="outline-1">Outline</h2>
<ol type="1">
<li>Log-Log Regression Model by YEAR</li>
<li>Longitudinal Log-Log Regression Model by Race</li>
<li>Time series model</li>
</ol>
</section>
<section id="log-log-regression-model-by-year" class="level2">
<h2 class="anchored" data-anchor-id="log-log-regression-model-by-year">1. Log-Log Regression Model by YEAR</h2>
<section id="model-overview-5" class="level3">
<h3 class="anchored" data-anchor-id="model-overview-5">Model Overview:</h3>
<ul>
<li>This analysis implements the validated Log-Log regression approach on annual data segments to assess temporal trends and variations.</li>
</ul>
</section>
<section id="model-findings-4" class="level3">
<h3 class="anchored" data-anchor-id="model-findings-4">Model Findings:</h3>
<div class="cell">
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Observations show peaks in coefficient estimates, notably after 2000 and before 2020, with subsequent troughs suggesting potential corrective periods.</li>
<li>The coefficient shows dropping down during the Covid-19 period.</li>
<li>The coefficient trend exhibits cyclicity with no monotonic progression, featuring multiple peaks and valleys, implying a potential cyclical influence on the income-rent relationship.</li>
<li>Coefficient estimates range within a tight interval, indicating a consistent strength of relationship across the datasetâ€™s timespan.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>R-squared values demonstrate time-bound variability, implying shifts in the modelâ€™s explanatory power from year to year.</li>
<li>A recent sharp decline in R-squared highlights a potential reduction in predictive accuracy or a substantial data structure change.</li>
</ul>
</section>
<section id="statistical-performance-5" class="level3">
<h3 class="anchored" data-anchor-id="statistical-performance-5">Statistical Performance:</h3>
<p>[Click here to view the summary table for the model of each Year.] (https://yatingzhu.shinyapps.io/app3/)</p>
<ul>
<li>All models are statistically validated, while reviewing each coefficient of each year through â€˜tidyâ€™ table, there is a noticeable exception in the MARSTSeparated category for the year 2022 shows to be statistically insiginificant, but others are all good .</li>
<li>R-squared values exhibit minor fluctuations over time, signifying a stable degree of explained variability in the response variable by the model.</li>
<li>Adjusted R-squared values, marginally lower than the R-squared, adhere to expectations, considering model complexity relative to data volume.</li>
<li>P-values indicate consistent statistical significance for the modelâ€™s predictors on an annual basis.</li>
<li>Log-likelihood, AIC, and BIC values increment over time, which may indicate an improving model fit or increasing data variability.</li>
<li>The trends in model deviance require additional context for clear interpretation, while a gradual decrease in df.residual suggests either an increase in model parameters or variations in data availability over time.</li>
</ul>
</section>
</section>
<section id="longitudinal-log-log-regression-model-by-race" class="level2">
<h2 class="anchored" data-anchor-id="longitudinal-log-log-regression-model-by-race">2. Longitudinal Log-Log Regression Model by Race</h2>
<section id="model-overview-6" class="level3">
<h3 class="anchored" data-anchor-id="model-overview-6">Model Overview:</h3>
<ul>
<li>This model extended the 2022 dataset analysis to explore how the rent-income relationship for each racial group has evolved from 2000 to 2022.</li>
<li>Trends over time for each race were charted to illustrate these dynamics.</li>
<li>Similar to the 2022 model, the coefficients were found to be statistically significant and the residual plots falling within an acceptable range.</li>
</ul>
</section>
<section id="model-findings-5" class="level3">
<h3 class="anchored" data-anchor-id="model-findings-5">Model Findings:</h3>
<p><a href="https://yatingzhu.shinyapps.io/app4/">Click here to view the plot for the cofficients across Years for each race.</a></p>
<ul>
<li>Specific Trends:</li>
</ul>
<p><strong>Alaska Native</strong>: Shows minor fluctuations around zero, with both positive and negative coefficients, indicating inconsistent trends over the years.</p>
<p><strong>American</strong>: This category has NA values, suggesting incomplete data, making it hard to discern a clear trend.</p>
<p><strong>Chinese</strong>: Generally has higher positive coefficients compared to other groups, particularly noticeable in later years, indicating a strong positive association with income in those years.</p>
<p><strong>Japanese</strong>: Has some missing values but otherwise presents mostly positive coefficients, with a notable spike in recent years.</p>
<p><strong>Islander</strong>: Also features both positive and negative coefficients with considerable variability.</p>
<p><strong>Other race, nec</strong>: Shows a mix of positive, negative, and NA values, making a clear trend difficult to establish.</p>
<p><strong>Two or more races</strong>: This group generally has positive coefficients, with a few exceptions, suggesting a fairly consistent positive association with income.</p>
<p><strong>Whites</strong>: Present a range of coefficients, mostly positive with some fluctuations, but generally indicate a positive association with income.</p>
<ul>
<li>Race Comparisons: Certain racial categories, like those identifying as Chinese and Japanese, tend to have higher coefficients, suggesting a stronger relationship with income than other races in the dataset. Conversely, the â€˜Other race, necâ€™ category often has lower coefficients, implying a weaker association with income.</li>
</ul>
</section>
<section id="statistical-performance-6" class="level3">
<h3 class="anchored" data-anchor-id="statistical-performance-6">Statistical Performance:</h3>
<p><a href="https://yatingzhu.shinyapps.io/app5/">Click here to view the summary table of each race across Years.</a></p>
<ul>
<li>The p-value of 0 consistently across all races and years suggests that the models are statistically significant. This means the results are unlikely to have occurred by chance, and there is a statistically significant relationship between the dependent and independent variables in the models used.</li>
</ul>
</section>
<section id="discussion-of-the-topic" class="level3">
<h3 class="anchored" data-anchor-id="discussion-of-the-topic">Discussion of the topic:</h3>
<ul>
<li>Race is really a point that needs to explore. Through the result and the visualization of the coefficient changes for each race, there is definitely different patterns showed.</li>
</ul>
</section>
</section>
<section id="time-series-model" class="level2">
<h2 class="anchored" data-anchor-id="time-series-model">3.Time series model</h2>
<section id="model-overview-7" class="level3">
<h3 class="anchored" data-anchor-id="model-overview-7">Model Overview:</h3>
</section>
<section id="model-findings-6" class="level3">
<h3 class="anchored" data-anchor-id="model-findings-6">Model Findings:</h3>
</section>
</section>
<section id="log-log-model" class="level2">
<h2 class="anchored" data-anchor-id="log-log-model">log-log model</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>data_path <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">"dataset"</span>, <span class="st">"data_twenty_clean.csv"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>data_path1 <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">"dataset"</span>, <span class="st">"latest_clean.csv"</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>data_twenty <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(data_path,<span class="at">show_col_types =</span> <span class="cn">FALSE</span>) </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>data_2022 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(data_path1,<span class="at">show_col_types =</span> <span class="cn">FALSE</span>) </span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lme4)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom.mixed)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nlme)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'nlme'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:lme4':

    lmList</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    collapse</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(car)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="regression-coefficients-table" class="level3">
<h3 class="anchored" data-anchor-id="regression-coefficients-table">Regression Coefficients Table:</h3>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 9%">
<col style="width: 18%">
<col style="width: 37%">
<col style="width: 11%">
<col style="width: 10%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">effect</th>
<th style="text-align: left;">group</th>
<th style="text-align: left;">term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">std.error</th>
<th style="text-align: right;">statistic</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">4.6473187</td>
<td style="text-align: right;">0.0722683</td>
<td style="text-align: right;">64.3064496</td>
</tr>
<tr class="even">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">log_INCTOT</td>
<td style="text-align: right;">0.1466717</td>
<td style="text-align: right;">0.0017573</td>
<td style="text-align: right;">83.4655767</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">ROOMS</td>
<td style="text-align: right;">0.0662534</td>
<td style="text-align: right;">0.0008691</td>
<td style="text-align: right;">76.2356703</td>
</tr>
<tr class="even">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NFAMS</td>
<td style="text-align: right;">0.0876972</td>
<td style="text-align: right;">0.0024604</td>
<td style="text-align: right;">35.6427658</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">MARSTMarried, spouse absent</td>
<td style="text-align: right;">0.1084348</td>
<td style="text-align: right;">0.0107642</td>
<td style="text-align: right;">10.0736180</td>
</tr>
<tr class="even">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">MARSTMarried, spouse present</td>
<td style="text-align: right;">0.1940211</td>
<td style="text-align: right;">0.0049332</td>
<td style="text-align: right;">39.3300138</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">MARSTNever married/single</td>
<td style="text-align: right;">0.1507032</td>
<td style="text-align: right;">0.0048136</td>
<td style="text-align: right;">31.3079709</td>
</tr>
<tr class="even">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">MARSTSeparated</td>
<td style="text-align: right;">0.0140153</td>
<td style="text-align: right;">0.0089928</td>
<td style="text-align: right;">1.5585015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">MARSTWidowed</td>
<td style="text-align: right;">0.0171637</td>
<td style="text-align: right;">0.0076327</td>
<td style="text-align: right;">2.2486938</td>
</tr>
<tr class="even">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">RACEBlack/African American</td>
<td style="text-align: right;">0.2025752</td>
<td style="text-align: right;">0.0157059</td>
<td style="text-align: right;">12.8979976</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">RACEChinese</td>
<td style="text-align: right;">0.3392542</td>
<td style="text-align: right;">0.0210242</td>
<td style="text-align: right;">16.1363309</td>
</tr>
<tr class="even">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">RACEJapanese</td>
<td style="text-align: right;">0.4122124</td>
<td style="text-align: right;">0.0330440</td>
<td style="text-align: right;">12.4746375</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">RACEOther Asian or Pacific Islander</td>
<td style="text-align: right;">0.4046109</td>
<td style="text-align: right;">0.0169256</td>
<td style="text-align: right;">23.9051903</td>
</tr>
<tr class="even">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">RACEOther race, nec</td>
<td style="text-align: right;">0.2698439</td>
<td style="text-align: right;">0.0163122</td>
<td style="text-align: right;">16.5425061</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">RACEThree or more major races</td>
<td style="text-align: right;">0.3714474</td>
<td style="text-align: right;">0.0294801</td>
<td style="text-align: right;">12.5999178</td>
</tr>
<tr class="even">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">RACETwo major races</td>
<td style="text-align: right;">0.3498633</td>
<td style="text-align: right;">0.0171818</td>
<td style="text-align: right;">20.3624349</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">RACEWhite</td>
<td style="text-align: right;">0.2300570</td>
<td style="text-align: right;">0.0152785</td>
<td style="text-align: right;">15.0576130</td>
</tr>
<tr class="even">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">EMPSTATNot in labour force</td>
<td style="text-align: right;">-0.0888542</td>
<td style="text-align: right;">0.0042660</td>
<td style="text-align: right;">-20.8284874</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fixed</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">EMPSTATUnemployed</td>
<td style="text-align: right;">0.0050312</td>
<td style="text-align: right;">0.0075894</td>
<td style="text-align: right;">0.6629276</td>
</tr>
<tr class="even">
<td style="text-align: left;">ran_pars</td>
<td style="text-align: left;">REGION_CLASSIFIED</td>
<td style="text-align: left;">sd__(Intercept)</td>
<td style="text-align: right;">0.1360942</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ran_pars</td>
<td style="text-align: left;">Residual</td>
<td style="text-align: left;">sd__Observation</td>
<td style="text-align: right;">0.4839304</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li>The model suggests that a 10% increase in income is predicted to raise rent by an average of 14.66%, with all other variables held constant, indicating incomeâ€™s elasticity effect on rent.</li>
</ul>
</section>
<section id="statistical-performance-7" class="level3">
<h3 class="anchored" data-anchor-id="statistical-performance-7">Statistical performance:</h3>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">nobs</th>
<th style="text-align: right;">sigma</th>
<th style="text-align: right;">logLik</th>
<th style="text-align: right;">AIC</th>
<th style="text-align: right;">BIC</th>
<th style="text-align: right;">deviance</th>
<th style="text-align: right;">df.residual</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">94520</td>
<td style="text-align: right;">0.4839304</td>
<td style="text-align: right;">-65529.1</td>
<td style="text-align: right;">131100.2</td>
<td style="text-align: right;">131298.8</td>
<td style="text-align: right;">131058.2</td>
<td style="text-align: right;">94499</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li>There are 94520 observations in the table, which generally is a large number which is good.</li>
<li>Residual Standard Error (sigma): The residual standard error is 0.4839304, This value indicates there are deviation of the observed values from the fitted values. A lower residual standard error suggests a model with a good fit to the data.</li>
<li>Overall statistics suggests there are limitations to the model, but it generally captures the overall trend which further suggests in the residual plot and qq plot.</li>
</ul>
</section>
<section id="model-discussion-5" class="level3">
<h3 class="anchored" data-anchor-id="model-discussion-5">Model discussion</h3>
</section>
</section>
<section id="residual-plot" class="level2">
<h2 class="anchored" data-anchor-id="residual-plot">Residual plot</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>The residual plot seems to have certain problem with heteroscedasticity, which is pretty normal in our model since we encountered similar problem in blog post 4. However, this is common in non-transformed data and it is our one of the limitation in our model.</li>
<li>This log-transformed model seems to perform better in terms of having residuals more consistently distributed around zero. This suggests that the log transformation helped to stabilize the variance of the residuals and improve the modelâ€™s homoscedasticity.</li>
</ul>
</section>
<section id="qq-plot" class="level2">
<h2 class="anchored" data-anchor-id="qq-plot">QQ plot</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="analysis_files/figure-html/unnamed-chunk-30-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2873 24699</code></pre>
</div>
</div>
<ul>
<li>The Q-Q plot we got for model residuals suggests similar issues with our residual plot, however, this is common and again one of our limitation of our model.</li>
<li>The Q-Q plot captures the overall trend and relevant factors, despite the presence of certain outliers.</li>
<li>The residuals at the lower and upper ends of the distribution deviate from the line, which indicates that the distribution of residuals has heavier tails than the normal distribution. This means there are more extreme values (outliers) than you would expect if the residuals were perfectly normally distributed.</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>