{
  "hash": "7d26cb7b066b8a75d83126ababab40a6",
  "result": {
    "markdown": "---\ntitle: \"Class blog 4\"\nauthor: \"Yating Zhu, Dingyu Guo, Suh Edwin Jiho, Wang Muxi\"\ndate: \"2024-03-30\"\ndate-modified: \"2024-03-30\"\ndraft: FALSE\n---\n\n::: {.cell}\n\n:::\n\n\n## Roughly see the relationship between predictor and response variable\n\n::: {.cell}\n::: {.cell-output-display}\n![](class-blog-4_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n- The horizontal axis represents the total income (INCTOT), which is the predictor.\n\n- The vertical axis represents the rent paid (RENTGRS), which is the response.\n\n- The purpose of creating this scatter plot is to assess whether there is a linear or non-linear relationship between total income and rent paid in a general way. \n\n- There seems to be a large concentration of points towards the lower end of the income scale with lower rents, which suggests that a significant portion of the dataset includes individuals with lower income and rent levels.\n\n- The plot does not clearly show a distinct linear trend, suggesting that the relationship between these variables might be non-linear \n\n## Simple linear model \nThe output of fitting a simple linear model will get the summary like following: \n\n\n::: {.cell}\n\n:::\n\n\n### Regression Coefficients Table:\n\n::: {.cell}\n::: {.cell-output-display}\n|term        |     estimate|  std.error| statistic| p.value|\n|:-----------|------------:|----------:|---------:|-------:|\n|(Intercept) | 1369.9952048| 14.2472905|  96.15830|       0|\n|INCTOT      |    0.0053213|  0.0002182|  24.39103|       0|\n:::\n:::\n\n\n### Model Fit Statistics Table:\n\n::: {.cell}\n::: {.cell-output-display}\n| r.squared| adj.r.squared|    sigma| statistic| p.value| df|    logLik|      AIC|      BIC|   deviance| df.residual| nobs|\n|---------:|-------------:|--------:|---------:|-------:|--:|---------:|--------:|--------:|----------:|-----------:|----:|\n| 0.0902228|     0.0900712| 896.1935|  594.9223|       0|  1| -49309.79| 98625.57| 98645.67| 4818173576|        5999| 6001|\n:::\n:::\n\n\n### Residuals and Related Statistics Table:\n\n::: {.cell}\n::: {.cell-output-display}\n| RENTGRS| INCTOT|  .fitted|      .resid|      .hat|   .sigma|   .cooksd| .std.resid|\n|-------:|------:|--------:|-----------:|---------:|--------:|---------:|----------:|\n|    1200|      0| 1369.995|  -169.99520| 0.0002527| 896.2655| 0.0000045| -0.1897098|\n|     253|  49200| 1631.803| -1378.80263| 0.0001739| 896.0913| 0.0002059| -1.5386438|\n|    3000|  89900| 1848.379|  1151.62090| 0.0003256| 896.1448| 0.0002690|  1.2852229|\n|    2242|   1500| 1377.977|   864.02286| 0.0002461| 896.1988| 0.0001144|  0.9642217|\n|    1403|  34000| 1550.919|  -147.91904| 0.0001676| 896.2662| 0.0000023| -0.1650664|\n|    1450|   2000| 1380.638|    69.36222| 0.0002439| 896.2678| 0.0000007|  0.0774059|\n:::\n:::\n\n- The R-squared value is 0.09, which means that approximately 9% of the variability in the rent paid (RENTGRS) can be explained by the total income (INCTOT). This is a relatively low R-squared value, indicating that the linear model does not explain a large portion of the variability in the rent.But it is fair, because we only include one predictor here.\n- The statistic value is 594, which is extremely high. This suggests that the overall significance of the model is strong, despite the low R-squared. This could be due to a large sample size, which can make even small relationships appear statistically significant.\n\n### Residual plot\n\n::: {.cell}\n::: {.cell-output-display}\n![](class-blog-4_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n- This diagram indicates that the spread of residuals appears to increase as the fitted values increase. This pattern indicates heteroscedasticity, which means that the variability of the residuals is not constant across levels of the predictor variable. In an ideal scenario, I'd want to see a consistent spread of residuals across all levels of fitted values, suggesting homoscedasticity.\n\n## Multiple linear regression\nWe strive to enhance model accuracy by incorporating additional control variables into the model, encompassing both categorical and numerical variables. These control variables help mitigate bias, isolate effects, and enhance generalization. Subsequently, we present the correlation matrix, which provides valuable insights into the relationships between numerical variables.\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n|        |     INCTOT|      ROOMS|      NFAMS|        AGE|    FTOTINC|    RENTGRS|\n|:-------|----------:|----------:|----------:|----------:|----------:|----------:|\n|INCTOT  |  1.0000000| -0.0284713| -0.0358320|  0.0418338|  0.6905567|  0.3003711|\n|ROOMS   | -0.0284713|  1.0000000|  0.1409337| -0.0610423|  0.1050778|  0.1457684|\n|NFAMS   | -0.0358320|  0.1409337|  1.0000000| -0.1266306| -0.1053792|  0.0966248|\n|AGE     |  0.0418338| -0.0610423| -0.1266306|  1.0000000| -0.0521530| -0.0837413|\n|FTOTINC |  0.6905567|  0.1050778| -0.1053792| -0.0521530|  1.0000000|  0.4292341|\n|RENTGRS |  0.3003711|  0.1457684|  0.0966248| -0.0837413|  0.4292341|  1.0000000|\n:::\n:::\n\n\n- INCTOT and FTOINC have a strong positive correlation, indicating that as individual income rises, family income tends to rise in concert suggesting a possible overlap or direct relationship between these two variables in the dataset. So we need to care about the multicollineaity problem while fitting model.\n\n- ROOMS and NFAMS display minor positive correlations to RENTGRS. This might suggest that properties with more rooms may house more families and potentially lead to higher rents.\n\n- Notably, Age has a moderate negative correlation with Number of Families, which could hint at younger populations having larger family sizes or vice versa, but this is not a strong relationship. Still, we should observe the  multicollineaity problem while fitting model.\n\n\n::: {.cell}\n\n:::\n\n\n### Regression Coefficients Table:\n\n::: {.cell}\n::: {.cell-output-display}\n|term                                 |    estimate|   std.error|  statistic|   p.value|\n|:------------------------------------|-----------:|-----------:|----------:|---------:|\n|(Intercept)                          | 138.1185777| 141.2714323|  0.9776823| 0.3282711|\n|INCTOT                               |   0.0006097|   0.0002902|  2.1007863| 0.0357015|\n|KITCHENYes (shared or exclusive use) |  -6.1829776|  90.8767566| -0.0680370| 0.9457585|\n|ROOMS                                |  46.4907520|   5.3702515|  8.6570903| 0.0000000|\n|NFAMS                                | 132.1944360|  13.6931462|  9.6540586| 0.0000000|\n|AGE                                  |  -2.0758142|   0.7523351| -2.7591615| 0.0058126|\n|MARSTMarried, spouse absent          |  49.6811716|  68.5403491|  0.7248456| 0.4685751|\n|MARSTMarried, spouse present         | 159.9536213|  35.4269714|  4.5150239| 0.0000065|\n|MARSTNever married/single            | 105.3336893|  36.3950074|  2.8941796| 0.0038153|\n|MARSTSeparated                       |  -8.8902061|  67.6504230| -0.1314139| 0.8954523|\n|MARSTWidowed                         | 155.3446449|  54.6823660|  2.8408545| 0.0045145|\n|RACEBlack/African American           | 298.3828456|  95.0013295|  3.1408281| 0.0016929|\n|RACEChinese                          | 555.5828036| 124.8976462|  4.4483048| 0.0000088|\n|RACEJapanese                         | 600.4379460| 196.2637964|  3.0593413| 0.0022281|\n|RACEOther Asian or Pacific Islander  | 457.2962479|  99.9161477|  4.5768002| 0.0000048|\n|RACEOther race, nec                  | 326.8017293|  96.1126737|  3.4001939| 0.0006778|\n|RACEThree or more major races        | 423.9569703| 136.5156638|  3.1055555| 0.0019081|\n|RACETwo major races                  | 344.3391572|  95.2001877|  3.6170008| 0.0003005|\n|RACEWhite                            | 374.0737917|  91.7421010|  4.0774496| 0.0000461|\n|EMPSTATNot in labour force           | -16.9682582|  25.5211603| -0.6648702| 0.5061592|\n|EMPSTATUnemployed                    |  64.2293142|  54.6215828|  1.1758962| 0.2396832|\n|FTOTINC                              |   0.0042445|   0.0001887| 22.4923166| 0.0000000|\n|REGION_CLASSIFIEDNORTHEAST           | 388.6103788|  35.8876194| 10.8285360| 0.0000000|\n|REGION_CLASSIFIEDSOUTH               | 252.4183530|  31.3606818|  8.0488796| 0.0000000|\n|REGION_CLASSIFIEDWEST                | 676.2307407|  33.2843111| 20.3168015| 0.0000000|\n:::\n:::\n\n\n### Model Fit Statistics Table:\n\n::: {.cell}\n::: {.cell-output-display}\n| r.squared| adj.r.squared|    sigma| statistic| p.value| df|    logLik|      AIC|      BIC|   deviance| df.residual| nobs|\n|---------:|-------------:|--------:|---------:|-------:|--:|---------:|--------:|--------:|----------:|-----------:|----:|\n| 0.2836063|     0.2807292| 796.7908|  98.57423|       0| 24| -48592.76| 97237.51| 97411.71| 3794016209|        5976| 6001|\n:::\n:::\n\n\n### Residuals and Related Statistics Table:\n\n::: {.cell}\n::: {.cell-output-display}\n| RENTGRS| INCTOT|KITCHEN                       | ROOMS| NFAMS| AGE|MARST                   |RACE            |EMPSTAT             | FTOTINC|REGION_CLASSIFIED |  .fitted|      .resid|      .hat|   .sigma|   .cooksd| .std.resid|\n|-------:|------:|:-----------------------------|-----:|-----:|---:|:-----------------------|:---------------|:-------------------|-------:|:-----------------|--------:|-----------:|---------:|--------:|---------:|----------:|\n|    1200|      0|Yes (shared or exclusive use) |     4|     1|  16|Never married/single    |Other race, nec |Not in labour force |   37800|SOUTH             | 1244.907|   -44.90653| 0.0031953| 796.8572| 0.0000004| -0.0564495|\n|     253|  49200|Yes (shared or exclusive use) |     3|     1|  63|Widowed                 |White           |Employed            |   49200|SOUTH             | 1293.490| -1040.49010| 0.0041196| 796.7433| 0.0002833| -1.3085492|\n|    3000|  89900|Yes (shared or exclusive use) |     7|     1|  76|Married, spouse present |White           |Employed            |   98700|WEST              | 2115.807|   884.19328| 0.0024677| 796.7751| 0.0001222|  1.1110649|\n|    2242|   1500|Yes (shared or exclusive use) |     5|     4|  24|Never married/single    |White           |Not in labour force |    1500|WEST              | 1989.299|   252.70115| 0.0034850| 796.8507| 0.0000141|  0.3177028|\n|    1403|  34000|Yes (shared or exclusive use) |     3|     1|  54|Married, spouse present |White           |Employed            |   79000|WEST              | 1857.811|  -454.81093| 0.0016027| 796.8357| 0.0000210| -0.5712614|\n|    1450|   2000|Yes (shared or exclusive use) |     3|     1|  33|Never married/single    |Other race, nec |Not in labour force |    2000|SOUTH             | 1012.394|   437.60563| 0.0029432| 796.8373| 0.0000357|  0.5500202|\n:::\n:::\n\n\n- The R-squared value is 0.28, indicating that about 28% of the variability in the dependent variable is explained by the model. This is a significant improvement over the simple linear model previously discussed, suggesting that including more variables helps explain the variance in the dependent variable more effectively.\n\n-  The adjusted R-squared value is 0.2807292, which is very close to the R-squared value.Since the adjusted R-squared is almost identical to the R-squared, this implies that the additional predictors are indeed contributing valuable information.\n\n-  The statistic value is 98.57, which is very high and the p-value is 0, indicating that the model is statistically significant. It means that the likelihood of the regression results being due to chance is extremely low. \n\n### Multicollinearity concerns\n\n::: {.cell}\n::: {.cell-output-display}\n|                  |     GVIF| Df| GVIF^(1/(2*Df))|\n|:-----------------|--------:|--:|---------------:|\n|INCTOT            | 2.239087|  1|        1.496358|\n|KITCHEN           | 1.026782|  1|        1.013303|\n|ROOMS             | 1.099700|  1|        1.048666|\n|NFAMS             | 1.103313|  1|        1.050387|\n|AGE               | 1.849885|  1|        1.360105|\n|MARST             | 1.876545|  5|        1.064966|\n|RACE              | 1.198654|  8|        1.011389|\n|EMPSTAT           | 1.350056|  2|        1.077923|\n|FTOTINC           | 2.181999|  1|        1.477159|\n|REGION_CLASSIFIED | 1.129306|  3|        1.020474|\n:::\n:::\n\n\n- Through the result, INCTOT (Total Income) and FTOTINC (Family Total Income) stand out as having higher multicollinearity indicators than the others. While considering the what constitutes the Family total income, it is fair multicollinearity happens. So we decide to exclude the FTOTINC in our model. With a GVIF^(1/(2*Df)) value of INCTOT approximately 1.50 and FTOTINC is about 1.47, a VIF between 1 and 5 suggests moderate indication of multicollinearity.\n\n- Therefore, we decide to exclude the FTOTINC to avioud the multicollineariity problem. \n\n### Residual plot:\n\n::: {.cell}\n::: {.cell-output-display}\n![](class-blog-4_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n- Heterskedasticity still exits as the spread of the residuals appears to be increasing with the fitted values. According to the diagram, the residuals seem to form a pattern (rather than being randomly dispersed), it indicates that the relationship between the predictors and the response variable is not entirely linear.\n\n## Log - log Model\nTaking account into the possible non-linear relationship and the right-skwed distributions of our predictor and response variable, we take log to both of them. \n\n### RENTGRS:distribution of log(RENTGRS)\n\n::: {.cell}\n::: {.cell-output-display}\n![](class-blog-4_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n### INCTOT: distribution of log(INCTOT)\n\n::: {.cell}\n::: {.cell-output-display}\n![](class-blog-4_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\n## Log-log model\nBased on the previous MLR model, 1. we have applied a logarithmic transformation to both the rent and income variables to mitigate skewness in their distributions. But the problem is the logarithmic transformation necessitates all data points to be positive. Consequently, this has led to the exclusion of certain data samples that contained negative values.\n\n2. previous models indicated the presence of numerous outliers within our dataset. To address this, we have refined our dataset to include only those records where rent and income fall within three standard deviations from their respective sample means to minimize the impact of extreme values on the model's performance.\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n### Regression Coefficients Table\n\n::: {.cell}\n::: {.cell-output-display}\n|term                                 |   estimate| std.error|  statistic|   p.value|\n|:------------------------------------|----------:|---------:|----------:|---------:|\n|(Intercept)                          |  5.1366895| 0.1226201| 41.8910906| 0.0000000|\n|log_INCTOT                           |  0.1334432| 0.0076107| 17.5337350| 0.0000000|\n|KITCHENYes (shared or exclusive use) | -0.0066589| 0.0604818| -0.1100975| 0.9123363|\n|ROOMS                                |  0.0418089| 0.0036091| 11.5843972| 0.0000000|\n|NFAMS                                |  0.0328959| 0.0101097|  3.2538811| 0.0011458|\n|AGE                                  | -0.0035812| 0.0005551| -6.4518343| 0.0000000|\n|MARSTMarried, spouse absent          |  0.1202898| 0.0464015|  2.5923658| 0.0095588|\n|MARSTMarried, spouse present         |  0.2037844| 0.0234430|  8.6927664| 0.0000000|\n|MARSTNever married/single            |  0.1093652| 0.0241080|  4.5364680| 0.0000059|\n|MARSTSeparated                       |  0.0317790| 0.0447758|  0.7097359| 0.4779001|\n|MARSTWidowed                         |  0.1002446| 0.0360708|  2.7791094| 0.0054706|\n|RACEBlack/African American           |  0.2424495| 0.0680585|  3.5623687| 0.0003709|\n|RACEChinese                          |  0.2866273| 0.0892431|  3.2117595| 0.0013274|\n|RACEJapanese                         |  0.3098268| 0.1428295|  2.1692071| 0.0301126|\n|RACEOther Asian or Pacific Islander  |  0.3673041| 0.0716804|  5.1241908| 0.0000003|\n|RACEOther race, nec                  |  0.2807264| 0.0690309|  4.0666797| 0.0000484|\n|RACEThree or more major races        |  0.3545589| 0.0965627|  3.6717982| 0.0002433|\n|RACETwo major races                  |  0.2827201| 0.0683850|  4.1342400| 0.0000362|\n|RACEWhite                            |  0.2663981| 0.0659347|  4.0403296| 0.0000542|\n|EMPSTATNot in labour force           | -0.0362414| 0.0222232| -1.6307879| 0.1029963|\n|EMPSTATUnemployed                    |  0.0755285| 0.0431087|  1.7520454| 0.0798256|\n|REGION_CLASSIFIEDNORTHEAST           |  0.2785538| 0.0244365| 11.3990853| 0.0000000|\n|REGION_CLASSIFIEDSOUTH               |  0.1917026| 0.0213271|  8.9886669| 0.0000000|\n|REGION_CLASSIFIEDWEST                |  0.4656973| 0.0227072| 20.5088390| 0.0000000|\n:::\n:::\n\n\n### Model Fit Statistics Table:\n\n::: {.cell}\n::: {.cell-output-display}\n| r.squared| adj.r.squared|     sigma| statistic| p.value| df|    logLik|      AIC|      BIC| deviance| df.residual| nobs|\n|---------:|-------------:|---------:|---------:|-------:|--:|---------:|--------:|--------:|--------:|-----------:|----:|\n| 0.2267794|     0.2233215| 0.5072586|  65.58265|       0| 23| -3812.607| 7675.215| 7838.966| 1323.352|        5143| 5167|\n:::\n:::\n\n\n### Residuals and Related Statistics Table:\n\n::: {.cell}\n::: {.cell-output-display}\n| log_RENTGRS| log_INCTOT|KITCHEN                       | ROOMS| NFAMS| AGE|MARST                   |RACE            |EMPSTAT             |REGION_CLASSIFIED |  .fitted|     .resid|      .hat|    .sigma|   .cooksd| .std.resid|\n|-----------:|----------:|:-----------------------------|-----:|-----:|---:|:-----------------------|:---------------|:-------------------|:-----------------|--------:|----------:|---------:|---------:|---------:|----------:|\n|    5.533390|  10.803649|Yes (shared or exclusive use) |     3|     1|  63|Widowed                 |White           |Employed            |SOUTH             | 7.062756| -1.5293665| 0.0046387| 0.5068573| 0.0017733| -3.0219812|\n|    8.006368|  11.406453|Yes (shared or exclusive use) |     7|     1|  76|Married, spouse present |White           |Employed            |WEST              | 7.641411|  0.3649568| 0.0028847| 0.5072824| 0.0000626|  0.7205089|\n|    7.715124|   7.313220|Yes (shared or exclusive use) |     5|     4|  24|Never married/single    |White           |Not in labour force |WEST              | 7.165828|  0.5492953| 0.0057725| 0.5072498| 0.0002853|  1.0860093|\n|    7.246368|  10.434116|Yes (shared or exclusive use) |     3|     1|  54|Married, spouse present |White           |Employed            |WEST              | 7.423210| -0.1768415| 0.0018387| 0.5073020| 0.0000093| -0.3489430|\n|    7.279319|   7.600903|Yes (shared or exclusive use) |     3|     1|  33|Never married/single    |Other race, nec |Not in labour force |SOUTH             | 6.730015|  0.5493040| 0.0045412| 0.5072499| 0.0002239|  1.0853546|\n|    7.644441|   9.239899|Yes (shared or exclusive use) |     6|     1|  17|Never married/single    |White           |Employed            |MIDWEST           | 6.961664|  0.6827765| 0.0021260| 0.5072184| 0.0001612|  1.3474457|\n:::\n:::\n\n\n- The adjusted R-squared is 0.223. This value looks modest. In practical terms, it suggests that the model doesn't explain a large portion of the variance in the logarithm of rent. But in this social science and economic contexts, however, it is not uncommon to have lower R-squared values due to the complexity of human behavior and multiple unobserved factors. So we believe it is acceptable. \n\n- The p-value for the overall model is extremely low, which is good. It indicates that the model predictors, as a set, are statistically significantly associated with the response variable, the logarithm of rent. \n\n- The sigma value is the standard deviation of the error terms and is lower. This suggests that the residuals in this model are less spread out, indicating a tighter fit of the model to the data. However, since the scale is different from the previous model (which was on a log scale), this improvement is difficult to directly compare.\n\n### Residual plot\n\n::: {.cell}\n::: {.cell-output-display}\n![](class-blog-4_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n:::\n\n\n- The residuals appear to be centered around zero, which is good as it suggests no bias in the predictions.\n\n- There is some evidence of heteroscedasticity as the residuals seem to fan out as the fitted values increase, which is common in non-transformed data.\n\n- There are no clear patterns in the residuals, which suggests that the model catch the nonlinear relationships.\n\n- This log-transformed model seems to perform better in terms of having residuals more consistently distributed around zero. This suggests that the log transformation helped to stabilize the variance of the residuals and improve the model's homoscedasticity.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "supporting": [
      "class-blog-4_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}