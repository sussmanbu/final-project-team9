---
title: Analysis
description: Here we provide a detailed analysis using more sophisticated statistics techniques.
toc: true
draft: false
---
# The question we want to address 

- The primary focus of this research is to explore the relationship between an individual's total income and their rental expenditures.
  - The analysis aims to determine how rental spending adjusts in response to changes in income levels.
  - Both linear and nonlinear models are employed to elucidate the connection between these variables.
  - Additionally, the study considers racial differences, examining how the coefficients vary among different racial groups.
  - A time series regression model is utilized to account for temporal variations in this relationship.
  
# Outline of Modeling Approaches Explored

- Simple Linear Regression Model (Utilizing the 2022 Dataset)  -- Detail in class blog 4
  - Initial fitting of this model was conducted to determine the potential worth of exploring the relationship between the predictor and response. The findings indicated that further investigation was merited.

- Multiple Linear Regression Model (Utilizing the 2022 Dataset) -- Detail in class blog 4
  - This extended model incorporated additional confounding variables, building upon the simple linear regression.
  - A multicollinearity assessment was performed to circumvent overfitting issues.
  - The selection of control variables was affirmed.
  - The residual plot indicated the presence of heteroscedasticity.

- **Log-Log Regression Model** (Utilizing the 2022 Dataset) -- Detail in class blog 4
  - Both the predictor and response variables underwent log transformation to address the problem in the Multiple Linear Regression Model.
  - Outliers were identified and removed from the analysis.
  - All variables demonstrated statistical significance.
  - The residual plot suggested an acceptable fit.
  
- **Log-Log Regression Model** (Utilizing the 2000-2022 Dataset) -- Detail in class blog 5
  - Using the accepted model above to fit the dataset of each year 
  - All coefficients show to be statistically significant 
  - Plot the residual plot & comfirmed it is falling within an acceptable range.
  - Compare the coefficients change for each year, plot diagram see the trend 
  
- Log-Log Regression Model **by Race** (2022 Dataset) — Detail in class blog 6
  - The analysis stratified the data by race, applying the aforementioned Log-Log regression approach.
  - It provided detailed coefficients for each racial category, examining the influence on the rent-income relationship.
  - The statistical significance of all coefficients was verified, with residual plots falling within an acceptable range.

- Longitudinal Log-Log Regression Model **by Race** (2000-2022 Dataset) — Detail in class blog 6
  - This model extended the 2022 dataset analysis to explore how the rent-income relationship for each racial group has evolved from 2000 to 2022.
  - Trends over time for each race were charted to illustrate these dynamics.
  - Similar to the 2022 model, the coefficients were found to be statistically significant and the residual plots falling within an acceptable range.
  
- Time series model (using 2000-2022 dataset) -- Detail in class blog 7



##  Modeling and Inference
### Linear model assumptions 
1. Linearity 
```{r echo=FALSE, message=FALSE, warning=FALSE}
library(tidyr)
library(broom)
library(dplyr)
library(here)
library(gt)
library(purrr)
library(readr)
library(ggplot2)
library(knitr)
data_path <- here("dataset", "data_twenty_clean.csv")
data_path1 <- here("dataset", "latest_clean.csv")
data_twenty <- read_csv(data_path,show_col_types = FALSE) 
data_2022 <- read_csv(data_path1,show_col_types = FALSE) 
```
```{r echo=FALSE, message=FALSE, warning=FALSE}
ggplot(data_2022, aes(x = INCTOT, y = RENTGRS)) +
  geom_point(color = 'black', alpha = 0.4, size = 1.5) +  
  geom_smooth(method = "lm", color = "darkblue", size = 1.2) +  
  scale_x_continuous(
    limits = c(0, quantile(data_2022$INCTOT, 0.95)),
    labels = scales::comma,  
    name = "Total Income"  
  ) +
  scale_y_continuous(
    limits = c(0, quantile(data_2022$RENTGRS, 0.95)),
    labels = scales::comma,
    name = "Gross Rent"  
  ) +
  labs(title = "Relationship Between Total Income and Gross Rent of 2022 dataset",  
       subtitle = "Linear model fit shown in blue",
       caption = "Data source: IPUMS 2022") +
  theme_minimal() +  
  theme(
    text = element_text(size = 12), 
    plot.title = element_text(face = "bold"), 
    axis.title = element_text(face = "bold")  
  )
```
- For the assumptions of linear model, the plot only provide rough sense of what we could consider.The trend line suggests a possible linear relationship, but this needs further statistical testing.

- There seems to be a large concentration of points towards the lower end of the income scale with lower rents, which suggests that a significant portion of the dataset includes individuals with lower income and rent levels.

2. Normality: 

3.Homoskedasticity: The spread of rent appears to increase with income, hinting at heteroscedasticity rather than the required constant variance across levels of income.

4. Independence: 


Others:
1. Residual:

2. Multicollienarity:

  -  There are visible potential outliers, especially at higher income levels, which could affect the model's accuracy. We also found this problem in the data_page, therefore we exclude the outlier which defined as the range outside of the three standard deviations. 
  
### Log-Log Regression Model
```{r echo=FALSE, message=FALSE, warning=FALSE}
log_model_2022 <- lm(log_RENTGRS ~ log_INCTOT + KITCHEN + ROOMS + NFAMS + AGE + MARST + RACE + EMPSTAT + REGION_CLASSIFIED, data = data_2022 )
```
```{r echo=FALSE, message=FALSE, warning=FALSE}
tidy_log_model_2022 <- tidy(log_model_2022)
kable(tidy_log_model_2022)
```
- The coefficient for log_INCTOT has an estimate of approximately 0.1414 and a p-value of 0.00000000, which indicates that it is statistically significant.

- The conclusion of this model is a 10% increase in income is associated with an average 1.414% increase in the dependent variable of renting expenditure, holding all other variables constant.

- This result sounds make sense for us as the rent is relatively inelastic product from the econ perspective ...

```{r echo=FALSE, message=FALSE, warning=FALSE}
augmented_log_model_2022 <- head(augment(log_model_2022))
kable(augmented_log_model_2022)
```

- The adjusted R-squared is 0.223. This value looks modest. In practical terms, it suggests that the model doesn't explain a large portion of the variance in the logarithm of rent. But in this social science and economic contexts, however, it is not uncommon to have lower R-squared values due to the complexity of human behavior and multiple unobserved factors. So we believe it is acceptable. 

- The p-value for the overall model is extremely low, which is good. It indicates that the model predictors, as a set, are statistically significantly associated with the response variable, the logarithm of rent. 

- The sigma value is the standard deviation of the error terms and is lower. This suggests that the residuals in this model are less spread out, indicating a tighter fit of the model to the data. However, since the scale is different from the previous model (which was on a log scale), this improvement is difficult to directly compare.

### Residual plot
```{r echo=FALSE, message=FALSE, warning=FALSE}
# Calculate residuals and fitted values
residuals_2022 <- resid(log_model_2022)
fitted_values_2022 <- fitted(log_model_2022)

# Create a residual plot
plot(fitted_values_2022, residuals_2022, 
     xlab = "Fitted Values", ylab = "Residuals",
     main = "Residual Plot", pch = 20)
abline(h = 0, col = "red") 
```

- The residuals appear to be centered around zero, which is good as it suggests no bias in the predictions.

- There is some evidence of heteroscedasticity as the residuals seem to fan out as the fitted values increase, which is common in non-transformed data.

- There are no clear patterns in the residuals, which suggests that the model catch the nonlinear relationships.

- This log-transformed model seems to perform better in terms of having residuals more consistently distributed around zero. This suggests that the log transformation helped to stabilize the variance of the residuals and improve the model's homoscedasticity.


















  


------------------------------------------------------------------------

## Rubric: On this page

You will

-   Introduce what motivates your Data Analysis (DA)
    -   Which variables and relationships are you most interested in?
    -   What questions are you interested in answering?
    -   Provide context for the rest of the page. This will include figures/tables that illustrate aspects of the data of your question.
-   Modeling and Inference
    -   The page will include some kind of formal statistical model. This could be a linear regression, logistic regression, or another modeling framework.
    -   Explain the ideas and techniques you used to choose the predictors for your model. (Think about including interaction terms and other transformations of your variables.)
    -   Describe the results of your modelling and make sure to give a sense of the uncertainty in your estimates and conclusions.
-   Explain the flaws and limitations of your analysis
    -   Are there some assumptions that you needed to make that might not hold? Is there other data that would help to answer your questions?
-   Clarity Figures
    -   Are your figures/tables/results easy to read, informative, without problems like overplotting, hard-to-read labels, etc?
    -   Each figure should provide a key insight. Too many figures or other data summaries can detract from this. (While not a hard limit, around 5 total figures is probably a good target.)
    -   Default `lm` output and plots are typically not acceptable.
-   Clarity of Explanations
    -   How well do you explain each figure/result?
    -   Do you provide interpretations that suggest further analysis or explanations for observed phenomenon?
-   Organization and cleanliness.
    -   Make sure to remove excessive warnings, hide most or all code, organize with sections or multiple pages, use bullets, etc.
    -   This page should be self-contained, i.e. provide a description of the relevant data.
