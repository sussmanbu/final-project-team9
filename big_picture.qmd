---
title: Landlords Envy Him -- The Budget Whisperer!
description: Exploring the Tug-of-War Between Income and Rent in America
toc: true
draft: FALSE
---

![](images/BigPicturePage.png)
```{r echo=FALSE, message=FALSE, warning=FALSE}
library(shiny)
library(DT)
library(tidyr)
library(broom)
library(dplyr)
library(here)
library(gt)
library(purrr)
library(readr)
library(ggplot2)
library(knitr)
library(lme4)
library(broom.mixed)
library(kableExtra)
library(tidycensus)

data_path <- here("dataset", "data_twenty_clean.csv")
data_path1 <- here("dataset", "latest_clean.csv")

data_twenty <- read_csv(data_path,show_col_types = FALSE) 
data_2022 <- read_csv(data_path1,show_col_types = FALSE) 

```

# Introduction
Imagine every year, as the calendar turns, you write a bigger check for your rent. You're not alone. Across the country, millions are penning this annual escalation into their ledgers. But there's another figure that's climbing too—your income. Let's explore this curious dance of numbers and what it means for the roof over your head.


## The Dance Begins: Rising Rent
As the years roll by, the cost of renting a home has steadily increased. We've tracked this change using data from the IPUMS ACS, and the patterns are clear. The graph below is not just a line climbing a chart; it's a reflection of changing lives, of budgets adjusted, and of the increasing value we place on our homes.


#### Trend of Median Rent Over the Years
```{r echo=FALSE, message=FALSE, warning=FALSE}
annual_median_rent <- data_twenty %>%
  group_by(YEAR) %>%
  summarize(MedianRent = median(RENTGRS, na.rm = TRUE))

ggplot(annual_median_rent, aes(x = YEAR, y = MedianRent)) +
  geom_line(size=1.2, color="#95A5A6") + 
  geom_point(size=1.5, color="#3498DB", shape=21, fill="#3498DB") +  
  theme_minimal(base_size = 15) +  
  theme(
    plot.title = element_text(hjust = 0.5, size=15, face="bold", color="#34495E"), 
    axis.title = element_text(size=10, face="bold", color="#34495E"),  
    axis.text = element_text(color="#34495E"), 
    panel.grid.major = element_line(color="#ECF0F1", size=0.2),  
    panel.grid.minor = element_blank(), 
    legend.position = "none",
    plot.margin = margin(5.5, 5.5, 5.5, 5.5, "mm")
  ) +
  labs(
    title = "Trend of Median Rent Over the Years",
    x = "Year",
    y = "Median Gross Rent",
    caption = "Data Source: IPUMS"  
  )
```

## A Sigh of Relief: Rising Income

But as rent demands more from our wallets, something else is happening. Our incomes are also on an upward trajectory. This next graph isn't just about higher wages; it’s about the resilience and growth that have characterized our economy and personal financial stories.

#### Trend of Median Personal Income Over the Years
```{r echo=FALSE, message=FALSE, warning=FALSE}
annual_median_income <- data_twenty %>%
  group_by(YEAR) %>%
  summarize(MedianIncome = median(INCTOT, na.rm = TRUE))
ggplot(annual_median_income, aes(x = YEAR, y = MedianIncome)) +
  geom_line(size=1.2, color="#95A5A6") + 
  geom_point(size=1.5, color="#3498DB", shape=21, fill="#3498DB") + 
  theme_minimal(base_size = 15) +
  theme(
    plot.title = element_text(hjust = 0.5, size=15, face="bold", color="#34495E"),
    axis.title = element_text(size=10, face="bold", color="#34495E"),
    axis.text = element_text(color="#34495E"),
    panel.grid.major = element_line(color="#ECF0F1", size=0.2),
    panel.grid.minor = element_blank(),
    legend.position = "none",
    plot.margin = margin(5.5, 5.5, 5.5, 5.5, "mm")
  ) +
  labs(
    title = "Trend of Median Personal Income Over the Years",
    x = "Year",
    y = "Median Gross Personal Income",
    caption = "Data Source: IPUMS"
  )
```
## Diversity in Housing Data: A Look at Racial Representation

As we explore the dynamics of the housing market, it's essential to recognize the diversity within the data. This graph shows the distribution of different racial groups, reflecting the varying experiences across different communities.

#### Distribution of Racial Groups
```{r echo=FALSE, message=FALSE, warning=FALSE}
data_path <- here("dataset", "latest.csv")
library(readr)
rent_data_clean <- read_csv(data_path,show_col_types = FALSE)
#RACE
rent_data_clean <- rent_data_clean %>%
  mutate(RACE = case_when(
    RACE == "1" ~ "White",
    RACE == "2" ~ "Black/African American",
    RACE == "3" ~ "American Indian or Alaska Native",
    RACE == "4" ~ "Chinese",
    RACE == "5" ~ "Japanese",
    RACE == "6" ~ "Other Asian or Pacific Islander",
    RACE == "7" ~ "Other race, nec",
    RACE == "8" ~ "Two major races",
    RACE == "9" ~ "Three or more major races",
    TRUE ~ as.character(RACE) 
  ))

abbreviation_map <- c(
  "American Indian or Alaska Native" = "AI/AN",
  "Black/African American" = "Black",
  "Chinese" = "Chinese",
  "Japanese" = "Japanese",
  "Other Asian or Pacific Islander" = "Other Asian",
  "Other race, nec" = "Other",
  "Three or more major races" = "3+ Races",
  "Two major races" = "Two Races",
  "White" = "White"
)

race_counts <- rent_data_clean %>%
  mutate(Abbr_RACE = abbreviation_map[RACE]) %>%
  group_by(RACE, Abbr_RACE) %>%
  summarise(Count = n(), .groups = "drop") %>%
  mutate(Percentage = Count / sum(Count) * 100) %>%
  arrange(desc(Count))

```

```{r echo=FALSE, message=FALSE, warning=FALSE}
grouped_data <- data_2022 %>%
  dplyr::group_by(REGION_CLASSIFIED, RACE) %>%
  dplyr::summarise(RENTGRS_race = sum(RENTGRS), .groups = 'drop')

total_rent_by_region <- data_2022 %>%
  dplyr::group_by(REGION_CLASSIFIED) %>%
  dplyr::summarise(RENTGRS_total = sum(RENTGRS), .groups = 'drop')

merged_data <- merge(grouped_data, total_rent_by_region, by = "REGION_CLASSIFIED")


merged_data$percentage <- (merged_data$RENTGRS_race / merged_data$RENTGRS_total) * 100

p <- ggplot(merged_data, aes(x = REGION_CLASSIFIED, y = percentage, fill = RACE)) +
  geom_bar(stat = "identity", position = "fill") +
  theme_minimal() +
  labs(title = "Percentage of Total Rent by Race in Each U.S. Region",
       x = "Region",
       y = "Percentage of Total Rent") +
  scale_fill_brewer(palette = "Spectral") +
  theme(legend.title = element_text(face = "bold"), 
        legend.position = "right")
print(p)


```



## Interactive Exploration
```{r echo=FALSE, message=FALSE, warning=FALSE, results='hide'}
states <- tigris::states(cb = TRUE, class = "sf")

rent_data <- get_acs(geography = "state", variables = "B25064_001", year = 2019, survey = "acs5")

map_data <- left_join(states, rent_data, by = "GEOID")

ggplot(data = map_data) +
  geom_sf(aes(fill = estimate), color = "white") +
  scale_fill_continuous(name = "Median Gross Rent", low = "lightblue", high = "darkblue") +
  labs(title = "Median Gross Rent by State", subtitle = "Data from ACS 5-Year Estimates, 2019") +
  coord_sf(xlim = c(-125, -66), ylim = c(25, 50), expand = FALSE) +  # Adjust limits for continental US
  theme_minimal() +
  theme(legend.position = "right")
```
While the national trends provide a broad picture, the real story unfolds at a more personal level. How does your city fare in this dance of rent and income? Dive into our interactive dashboard to explore detailed data for your area

[Click the link here to find the city median rent of 2021 you live!](https://yatingzhu.shinyapps.io/app6/)

## Bridging the Graphs: Analysis and Insights

While we've seen the upward trends in both rent and income through our graphs, let's take a closer look at what these changes really mean. Our analysis goes beyond simple observation and digs into how these financial changes affect each other and what this might mean for you.

### Understanding the Model's Message

Our analysis used a special kind of mathematical model to predict how changes in income affect rent. Here’s what we found: if incomes go up by 10%, rent could increase by about 13.34% on average. This isn't just a random guess; it's a prediction backed by strong data, showing us how closely linked our earnings are to what we pay for housing.

### Explaining the Findings in Everyday Terms

- **How Rent Reacts to Income**: The number 0.1334 from our model tells us that rent doesn’t just increase slightly when incomes go up; it jumps by a noticeable amount. Imagine getting a 100 dollar increase in your monthly pay; this model predicts that your rent could go up by about 13.34 dollar. So, as we earn more, we also tend to spend more on rent.
  
- **Confidence in Our Model**: The details behind these numbers are very reliable. The data tells us this isn’t just happening by chance—it’s a real pattern that we see repeatedly in the numbers.

### Wrapping Up: What This Means for Us

This deep dive into the numbers helps us understand the tricky balance between earning more and the rising cost of living, especially when it comes to housing. It’s clear that as our incomes grow, so does the amount we have to pay in rent, often faster than we might hope. This can help everyone, from policymakers to renters, understand and plan better for the future.

### Learn More Yourself




